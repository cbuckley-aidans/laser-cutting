<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Laser Cutting Box Design Tutorial</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/inter-ui/3.19.3/inter.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/intro.js/6.0.0/intro.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intro.js/6.0.0/introjs.min.css">
    <!-- Using default color scheme from styles.css -->
</head>
<body>
    <div class="tutorial-container">
        <!-- Left Sidebar Navigation -->
        <div class="sidebar">
            <div class="sidebar-logo">LASER CUT<br>BOX DESIGN</div>
            <div class="step-button active" data-step="0" data-tooltip="Introduction">
                <i class="fas fa-list-ol"></i>
            </div>
            <div class="step-button" data-step="1" data-tooltip="Basic Configuration">
                <span>1</span>
            </div>
            <div class="step-button" data-step="2" data-tooltip="Export Settings">
                <span>2</span>
            </div>
        </div>

        <!-- Middle Instructions Panel -->
        <div class="instructions-panel">
            <h1 id="current-step-title">Introduction</h1>
            
            <div id="step-instructions">
                <!-- Will be populated by JavaScript -->
                <h3>Learning Intentions and Success Criteria</h3>
                
                <div class="card">
                    <p><strong>Learning Intentions:</strong></p>
                    <ol class="steps-list">
                        <li>Learn how to use makercase.com to design finger joint boxes</li>
                        <li>Understand the configuration options for laser-cut designs</li>
                        <li>Prepare vector files for laser cutting</li>
                    </ol>
                
                    <p><strong>Success Criteria:</strong></p>
                    <ol class="steps-list">
                        <li>Create a custom-sized box design with finger joints</li>
                        <li>Configure the design with appropriate settings for laser cutting</li>
                        <li>Export the design as an SVG file ready for cutting</li>
                    </ol>
                </div>
            </div>

            <!-- Navigation Buttons -->
            <div class="navigation">
                <button id="prevButton" class="nav-button" disabled><i class="fas fa-arrow-left"></i> Previous</button>
                <button id="nextButton" class="nav-button">Next <i class="fas fa-arrow-right"></i></button>
            </div>

            <!-- Progress Bar -->
            <div class="progress-container">
                <div class="progress-text">Progress: <span id="progress-percentage">0%</span></div>
                <div class="progress-bar">
                    <div class="progress" style="width: 0%;"></div>
                </div>
            </div>

            <div class="footer">
                Made with <span style="color: var(--accent-color);">â™¥</span> by                 <span id="creator-name">Buckley</span>
            </div>
        </div>

        <!-- Right Content Display Area -->
        <div class="content-display">
            <div class="card">
                <h2 id="content-title">Introduction</h2>
                <div id="media-content">
                    <!-- Will be populated by JavaScript -->
                    <div class="alert-box alert-info">
                        <p><strong>Tutorial Overview</strong></p>
                        <p>In this tutorial, you'll learn how to create custom box designs with finger joints using MakerCase, an online tool that generates box designs for laser cutting. By the end of this tutorial, you'll be able to create, configure, and export box designs ready for laser cutting.</p>
                    </div>

                    <div class="alert-box alert-warning">
                        <p><strong><i class="fas fa-info-circle"></i> How to use this resource</strong></p>
                        <p>Click the button below to learn how to navigate this tutorial.</p>
                        <button id="startWalkthrough" class="nav-button">
                            <i class="fas fa-walking"></i> Start Interactive Tour
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for viewing images -->
    <div id="imageModal" class="modal">
        <span class="modal-close">&times;</span>
        <img id="modalImage" class="modal-content">
    </div>

    <script>
        // Tutorial content configuration
        // Define your step titles
        const stepTitles = [
            "Introduction",
            "Basic Box Configuration",
            "Export Settings"
        ];

        // Define your step instructions (middle panel content)
        const stepInstructions = [
            // Step 0: Introduction
            `<h3>Introduction to MakerCase Box Design</h3>
            
            
            
            <div class="alert-box alert-info">
                <p><strong>Website URL:</strong></p>
                <p><a href="https://en.makercase.com/#/basicbox" target="_blank">https://en.makercase.com/#/basicbox</a></p>
            </div>`,
            
            // Step 1: Basic Box Configuration
            `<h3>Basic Box Configuration</h3>
            <p>In this step, you'll learn how to set up the basic parameters for your box design.</p>
            
            <div class="card">
                <h4>Configuration Steps:</h4>
                <ol class="steps-list">
                    <li>Set the <strong>Units</strong> to "Millimeters" by clicking on the "Millimeters" button in the Units section.</li>
                    <li>Enter your desired box dimensions in the Width, Height, and Depth fields.</li>
                    <li>Select whether these are <strong>inside</strong> or <strong>outside</strong> dimensions. For this tutorial, select "Outside".</li>
                    <li>Set the <strong>Material Thickness</strong> to "3mm" from the dropdown menu.</li>
                </ol>
            </div>
            
            <div class="alert-box alert-warning">
                <p><strong><i class="fas fa-exclamation-triangle"></i> Important Note:</strong></p>
                <p>3mm is the default thickness for acrylic and plywood in this tutorial. Some acrylic sheets are thinner than this, so make sure you measure your material if you are unsure.</p>
            </div>
            
            <div class="card">
                <h4>Configuration Steps (continued):</h4>
                <ol class="steps-list" start="5">
                    <li>Choose between an <strong>Open</strong> or <strong>Closed</strong> box design. For this tutorial, select "Open".</li>
                    <li>For <strong>Edge Joints</strong>, select "Finger" to create finger joints for assembly.</li>
                    <li>Adjust the <strong>Finger Size</strong> using the slider if needed. The default value (20.625) works well for most applications.</li>
                </ol>
            </div>
            
            <div class="tip-box">
                <div class="tip-title"><i class="fas fa-lightbulb"></i> Tips</div>
                <p>The finger joint size is automatically calculated based on your box dimensions, but you can manually adjust it if needed. Smaller fingers make for a more precise fit but may be more fragile, while larger fingers are stronger but may not look as refined.</p>
            </div>`,
            
            // Step 2: Export Settings (formerly Advanced Options Configuration)
            `<h3>Export Settings</h3>
            <p>Now that you've set up the basic parameters for your box, let's configure some export settings to customize your design.</p>
            
            <div class="card">
                <h4>Export Configuration Steps:</h4>
                <ol class="steps-list">
                    <li>Click on the <strong>Labels and Spacing</strong> tab at the top of the options panel.</li>
                    <li>For <strong>Panel Labels</strong>, select "Disabled" to remove text labels from your design.</li>
                    <li>For <strong>Panel Layout</strong>, choose "Combine" to arrange panels in an optimized layout.</li>
                    <li>Click on the <strong>Line Formatting</strong> tab to access line customization options.</li>
                    <li>Set the <strong>Cut Line Width</strong> to exactly 0.0009. This will be 0.003pts in Illustrator, which is what the laser cutter needs to read.</li>
                    <li>Once all settings are configured, click the <strong>Download SVG</strong> button to save your design.</li>
                </ol>
            </div>`
        ];

        // Define your media content (right panel)
        const stepMedia = [
            // Step 0: Introduction
            `<div class="alert-box alert-info">
                <p><strong>MakerCase Tutorial</strong></p>
                <p>MakerCase is a free, web-based application that generates box designs for laser cutting. It automatically calculates finger joints and provides a variety of customization options to suit your project needs.</p>
            </div>

            <div class="alert-box alert-warning">
                <p><strong><i class="fas fa-info-circle"></i> How to use this resource</strong></p>
                <p>Click the button below to learn how to navigate the page.</p>
                <button id="startWalkthrough" class="nav-button">
                    <i class="fas fa-walking"></i> Start Interactive Tour
                </button>
            </div>`,
            
            // Step 1: Basic Box Configuration
            `<div class="video-container">
                <video width="100%" controls autoplay loop muted playsinline>
                    <source src="https://i.imgur.com/g2G31TB.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <p style="text-align: center; margin-top: 15px;">Basic Box Configuration Video Tutorial</p>
            </div>`,
            
            // Step 2: Export Settings (formerly Advanced Options Configuration)
            `<div class="video-container">
                <video width="100%" controls autoplay loop muted playsinline>
                    <source src="https://i.imgur.com/dinMoGs.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
                <p style="text-align: center; margin-top: 15px;">Export Settings Video Tutorial</p>
            </div>`
        ];

        // Current step tracking
        let currentStep = 0;
        const totalSteps = stepInstructions.length;

        // DOM Elements
        const stepButtons = document.querySelectorAll('.step-button');
        const stepTitleEl = document.getElementById('current-step-title');
        const instructionsPanel = document.getElementById('step-instructions');
        const mediaContent = document.getElementById('media-content');
        const contentTitle = document.getElementById('content-title');
        const prevButton = document.getElementById('prevButton');
        const nextButton = document.getElementById('nextButton');
        const progressBar = document.querySelector('.progress');
        const progressPercentage = document.getElementById('progress-percentage');

        // Image modal
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');
        const modalClose = document.querySelector('.modal-close');

        // Initialize the tutorial
        function showStep(step) {
            // Update active step button
            stepButtons.forEach((button, index) => {
                button.classList.toggle('active', index === step);
            });

            // Update step title
            stepTitleEl.textContent = stepTitles[step];
            contentTitle.textContent = stepTitles[step];

            // Update content
            instructionsPanel.innerHTML = stepInstructions[step];
            mediaContent.innerHTML = stepMedia[step];

            // Update navigation buttons
            prevButton.disabled = step === 0;
            nextButton.style.display = step === totalSteps - 1 ? 'none' : 'flex';
            
            // Update progress
            const progress = Math.round(((step + 1) / totalSteps) * 100);
            progressBar.style.width = `${progress}%`;
            progressPercentage.textContent = `${progress}%`;
            
            // Initialize carousels if present
            initCarousels();
            
            currentStep = step;
        }

        // Initialize all carousels on the page
        function initCarousels() {
            // Find all carousel elements in the current step
            document.querySelectorAll('.carousel').forEach((carouselElement) => {
                const carouselContainer = carouselElement.querySelector('.carousel-container');
                if (!carouselContainer) return;
                
                const slides = carouselContainer.querySelectorAll('.carousel-slide');
                if (slides.length <= 1) return;
                
                // Get carousel controls
                const prevBtn = carouselElement.querySelector('.prev-btn');
                const nextBtn = carouselElement.querySelector('.next-btn');
                const indicators = carouselElement.querySelector('.carousel-indicators');
                
                if (!prevBtn || !nextBtn || !indicators) return;
                
                // Clear existing indicators and recreate them
                indicators.innerHTML = '';
                slides.forEach((_, i) => {
                    const indicator = document.createElement('div');
                    indicator.className = `carousel-indicator ${i === 0 ? 'active' : ''}`;
                    indicator.dataset.index = i;
                    indicator.addEventListener('click', () => {
                        scrollToSlide(carouselContainer, indicators, i);
                    });
                    indicators.appendChild(indicator);
                });
                
                // Track the current slide for this carousel
                carouselContainer.dataset.currentSlide = '0';
                
                // Add click handlers to navigation buttons
                prevBtn.onclick = function() {
                    const currentSlide = parseInt(carouselContainer.dataset.currentSlide || '0');
                    const newSlide = (currentSlide - 1 + slides.length) % slides.length;
                    scrollToSlide(carouselContainer, indicators, newSlide);
                    carouselContainer.dataset.currentSlide = newSlide.toString();
                };
                
                nextBtn.onclick = function() {
                    const currentSlide = parseInt(carouselContainer.dataset.currentSlide || '0');
                    const newSlide = (currentSlide + 1) % slides.length;
                    scrollToSlide(carouselContainer, indicators, newSlide);
                    carouselContainer.dataset.currentSlide = newSlide.toString();
                };
            });
        }

        // Scroll carousel to specific slide
        function scrollToSlide(carousel, indicators, index) {
            // Calculate the scroll position
            const slideWidth = carousel.clientWidth;
            const scrollPosition = slideWidth * index;
            
            // Animate the scroll
            carousel.scrollTo({
                left: scrollPosition,
                behavior: 'smooth'
            });
            
            // Update indicators
            const allIndicators = indicators.querySelectorAll('.carousel-indicator');
            allIndicators.forEach((ind, i) => {
                ind.classList.toggle('active', i === index);
            });
        }

        // Simple tooltip implementation
        function setupTooltips() {
            // Remove any existing tooltips
            const existingTooltips = document.querySelectorAll('.tooltip');
            existingTooltips.forEach(t => t.remove());
            
            // Create new tooltip element
            const tooltip = document.createElement('div');
            tooltip.className = 'tooltip';
            document.body.appendChild(tooltip);
            
            // Add event listeners to all step buttons
            const stepButtons = document.querySelectorAll('.step-button');
            stepButtons.forEach(button => {
                const tooltipText = button.getAttribute('data-tooltip');
                if (!tooltipText) return;
                
                // On mouse enter
                button.addEventListener('mouseenter', () => {
                    // Set tooltip text
                    tooltip.textContent = tooltipText;
                    
                    // Position tooltip based on viewport width
                    const rect = button.getBoundingClientRect();
                    if (window.innerWidth <= 1024) {
                        // Position below on mobile
                        tooltip.className = 'tooltip bottom';
                        tooltip.style.top = `${rect.bottom + 10}px`;
                        tooltip.style.left = `${rect.left + rect.width/2}px`;
                        tooltip.style.transform = 'translateX(-50%)';
                    } else {
                        // Position to the right on desktop
                        tooltip.className = 'tooltip right';
                        tooltip.style.top = `${rect.top + rect.height/2}px`;
                        tooltip.style.left = `${rect.right + 10}px`;
                        tooltip.style.transform = 'translateY(-50%)';
                    }
                    
                    // Make tooltip visible
                    tooltip.style.opacity = '1';
                });
                
                // On mouse leave
                button.addEventListener('mouseleave', () => {
                    tooltip.style.opacity = '0';
                });
            });
        }

        // Event Listeners
        stepButtons.forEach((button, index) => {
            button.addEventListener('click', () => showStep(index));
        });

        prevButton.addEventListener('click', () => {
            if (currentStep > 0) showStep(currentStep - 1);
        });

        nextButton.addEventListener('click', () => {
            if (currentStep < totalSteps - 1) showStep(currentStep + 1);
        });

        // Image modal functionality
        document.addEventListener('click', (e) => {
            if (e.target.tagName === 'IMG' && e.target.parentElement.classList.contains('image-container')) {
                modal.style.display = 'block';
                modalImg.src = e.target.src;
                modalImg.alt = e.target.alt;
            }
        });

        modalClose.addEventListener('click', () => {
            modal.style.display = 'none';
        });

        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                modal.style.display = 'none';
            }
        });

        // Close modal with Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modal.style.display === 'block') {
                modal.style.display = 'none';
            }
        });

        // Creator name with confetti
        document.getElementById('creator-name').addEventListener('click', () => {
            confetti({
                particleCount: 100,
                spread: 70,
                origin: { y: 0.8 },
                colors: ['#e63946', '#f7f7f7', '#f0f0f0', '#191919']
            });
        });

        // Initialize introjs walkthrough
        document.addEventListener('click', (e) => {
            if (e.target.id === 'startWalkthrough' || e.target.parentElement.id === 'startWalkthrough') {
                const intro = introJs();
                
                intro.setOptions({
                    steps: [
                        {
                            element: document.querySelector('.sidebar'),
                            intro: 'Use these numbered icons to navigate between different steps of the tutorial. Click on any number to jump directly to that step.',
                            position: 'right'
                        },
                        {
                            element: document.querySelector('.instructions-panel'),
                            intro: 'Read the step-by-step instructions in this middle panel. These detailed instructions will guide you through each part of the tutorial.',
                            position: 'right'
                        },
                        {
                            element: document.querySelector('.content-display'),
                            intro: 'View demonstration videos that show exactly how to perform each action in the MakerCase interface.',
                            position: 'left'
                        },
                        {
                            element: document.querySelector('.navigation'),
                            intro: 'Use these buttons to move forward and backward through the tutorial steps.',
                            position: 'top'
                        },
                        {
                            element: document.getElementById('current-step-title'),
                            intro: 'This shows which step you are currently viewing. Always check this to know where you are in the tutorial.',
                            position: 'bottom'
                        }
                    ],
                    showBullets: true,
                    showProgress: true,
                    disableInteraction: false,
                    doneLabel: 'Got it!'
                });
                
                intro.start();
                
                // After tour completes, show a success message
                intro.oncomplete(function() {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 },
                        colors: ['#e63946', '#f7f7f7', '#f0f0f0', '#191919']
                    });
                });
            }
        });

        // Initialize with first step and set up tooltips
        document.addEventListener('DOMContentLoaded', () => {
            showStep(0);
            setupTooltips();
            
            // Update tooltips on window resize
            window.addEventListener('resize', () => {
                setupTooltips();
            });
            
            // Update tooltips whenever a step button is clicked
            document.querySelectorAll('.step-button').forEach(button => {
                button.addEventListener('click', () => {
                    setTimeout(setupTooltips, 100);
                });
            });
        });
    </script>
</body>
</html>